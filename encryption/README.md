# Encryption

Club Penguin Plus uses a complicated system to encrypt packets sent from both the client and server, so malicious actors can't easily intercept or modify sent packets, even over http/ws protocols, which are normally unenrcypted.
<br><br>
This system is built using AES encryption with the `crypto-js/aes` node module.
<br><br>
There are four keys used in total, two for the client, and two for the server. The first two are used to encrypt and decrypt the two packets sent, because these packets are a request for the other two keys, which are used to encrypt and decrypt the rest of the packets.
<br><br>
The first two keys are generated by taking the current hour, date and day of the week, and multiplying them together. This is then converted to a hexadecimal string.
<br>
We then perform a varient of the ceaser cipher, where we shift each character in the string by a given value. This is done to make the key harder to guess.
<br>
We add two of these keys together, and add a salt to the end of the string, which is a randomly generated constant.
<br><br>
You can see a full example of the code used to generate the keys in `encryption.js`.
<br><br>
The other two keys are generated as random hexadecimal strings on the server, and are sent to the client and server in the `ga` packet.
<br><br><br>
